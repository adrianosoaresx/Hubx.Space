{% extends 'base.html' %}

{% block title %}Feed | Hubx{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 py-10">

  <!-- Cabeçalho -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-neutral-900">Feed de Postagens</h1>
    {% if not request.user.tipo.descricao == "root" %}
      <a href="{% url 'feed:nova_postagem' %}" target="_blank" class="inline-flex items-center gap-2 rounded bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-700 focus-visible:ring">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Nova postagem
      </a>
    {% endif %}
  </div>

  <div class="flex items-center gap-4 mb-4">
    <label class="font-semibold">Filtrar:</label>
    <select id="filtro-nucleo" name="nucleo"
            hx-get="{% url 'feed:feed' %}"
            hx-target="#feed-grid"
            hx-include="#filtro-nucleo"
            class="rounded border-gray-300">
      <option value="">Público</option>
      {% for n in nucleos_do_usuario %}
        <option value="{{ n.id }}">{{ n.nome }}</option>
      {% endfor %}
    </select>
  </div>

  <input type="search" name="q" id="feed-search"
         placeholder="Buscar postagens…"
         hx-get="{% url 'feed:feed' %}"
         hx-trigger="keyup changed delay:500ms"
         hx-target="#feed-grid"
         class="w-full rounded border-gray-300 mb-6">

  {% include "feed/_grid.html" %}

</section>
{% endblock %}
