{% extends "chat/base_chat.html" %}
{% load i18n %}

{% block title %}{% trans "Conversas" %}{% endblock %}

{% block chat_content %}
<main class="max-w-4xl mx-auto p-4">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-xl font-semibold">{% trans "Minhas conversas" %}</h1>
    <a
      href="{% url 'chat:nova_conversa' %}"
      class="bg-primary text-white px-4 py-2 rounded hover:bg-primary/90"
    >
      {% trans "Nova conversa" %}
    </a>
  </div>
  <ul role="list" class="bg-white divide-y divide-gray-200 rounded-lg">
    {% for conv in conversas %}
      <li>
        <a
          href="{{ conv.get_absolute_url }}"
          class="flex items-center justify-between py-2 px-4 hover:bg-gray-100"
        >
          <div>
            <p class="font-medium">{{ conv.titulo|default:conv.id }}</p>
            {% if conv.last_message_text %}
              <p class="text-sm text-gray-500">
                {{ conv.last_message_text|truncatechars:50 }}
              </p>
            {% endif %}
          </div>
          {% if conv.last_message_at %}
            <time
              datetime="{{ conv.last_message_at|date:'c' }}"
              class="text-xs text-gray-400"
            >
              {{ conv.last_message_at|date:'d/m H:i' }}
            </time>
          {% endif %}
        </a>
      </li>
    {% empty %}
      <li class="py-2 px-4 text-gray-500">{% trans "Nenhuma conversa." %}</li>
    {% endfor %}
  </ul>
</main>
{% endblock %}
