{% extends 'chat/base_chat.html' %}
{% load static %}
{% block title %}Chat{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/chat.css' %}">
{% endblock %}
{% block content %}
<div id="chat-container">
    <h3>Escolha um usuÃ¡rio para conversar</h3>
    <div class="user-list">
        {% for u in users %}
            <div class="user-card" onclick="openChat({{ u.id }})">
                <div class="user-avatar">
                    {% if u.avatar %}
                        <img src="{{ u.avatar.url }}" alt="{{ u.username }}">
                    {% else %}
                        <div class="avatar-placeholder">
                            <span>{{ u.username|make_list|first|upper }}</span>
                        </div>
                    {% endif %}
                </div>
                <div class="user-info">
                    <h4>{{ u.get_full_name|default:u.username }}</h4>
                    <p>@{{ u.username }}</p>
                </div>
                <div class="user-actions">
                    <span class="btn-icon" title="Chat">ðŸ’¬</span>
                </div>
            </div>
        {% empty %}
            <p>Nenhum outro membro encontrado.</p>
        {% endfor %}
    </div>
</div>

<script>
function openChat(userId){
    if(!userId) return;
    window.location.href = '/chat/room/' + userId + '/';
}
</script>
{% endblock %}
{% block footer %}<div class="chat-footer">HubX Chat</div>{% endblock %}
