{% extends 'perfil/perfil_subpage_base.html' %}
{% load static %}

{% block title %}Conex√µes e Seguidores | Hubx{% endblock %}

{% block perfil_subpage_content %}
<section id="conexoes" class="perfil-section active">
  <div class="section-header">
      <h2>Conex√µes e Seguidores</h2>
      <p>Gerencie sua rede de contatos</p>
  </div>

  <div class="tabs-container">
      <div class="tabs-header">
          <button class="tab-btn active" data-tab="minhas-conexoes">Minhas Conex√µes</button>
          <button class="tab-btn" data-tab="solicitacoes">Solicita√ß√µes</button>
          <button class="tab-btn" data-tab="seguidores">Seguidores</button>
          <button class="tab-btn" data-tab="seguindo">Seguindo</button>
      </div>

      <div class="tabs-content">
          <!-- Minhas Conex√µes -->
          <div class="tab-pane active" id="minhas-conexoes">
              <div class="search-bar">
                  <input type="text" placeholder="Buscar conex√µes..." class="search-input">
                  <button class="search-btn">üîç</button>
              </div>

              <div class="connections-grid">
                  {% for connection in connections %}
                  <div class="connection-card">
                      <div class="connection-avatar">
                          {% if connection.avatar %}
                          <img src="{{ connection.avatar.url }}" alt="{{ connection.username }}">
                          {% else %}
                          <div class="avatar-placeholder">
                              <span>{{ connection.username|make_list|first|upper }}</span>
                          </div>
                          {% endif %}
                      </div>
                      <div class="connection-info">
                          <h4>{{ connection.get_full_name }}</h4>
                          <p>@{{ connection.username }}</p>
                      </div>
                      <div class="connection-actions">
                          <a href="#" class="btn-icon chat-open" data-id="{{ connection.id }}" title="Chat">üí¨</a>
                          <button class="btn-icon" title="Remover conex√£o">‚ùå</button>
                      </div>
                  </div>
                  {% empty %}
                  <div class="empty-state">
                      <p>Voc√™ ainda n√£o tem conex√µes.</p>
                      <button class="btn-secondary">Encontrar Pessoas</button>
                  </div>
                  {% endfor %}
              </div>
          </div>

          <!-- Solicita√ß√µes -->
          <div class="tab-pane" id="solicitacoes">
              <div class="requests-list">
                  {% for request in connection_requests %}
                  <div class="request-card">
                      <div class="request-avatar">
                          {% if request.avatar %}
                          <img src="{{ request.avatar.url }}" alt="{{ request.username }}">
                          {% else %}
                          <div class="avatar-placeholder">
                              <span>{{ request.username|make_list|first|upper }}</span>
                          </div>
                          {% endif %}
                      </div>
                      <div class="request-info">
                          <h4>{{ request.get_full_name }}</h4>
                          <p>@{{ request.username }}</p>
                          <p class="request-message">{{ request.message }}</p>
                      </div>
                      <div class="request-actions">
                          <button class="btn-accept" data-id="{{ request.id }}">Aceitar</button>
                          <button class="btn-reject" data-id="{{ request.id }}">Recusar</button>
                      </div>
                  </div>
                  {% empty %}
                  <div class="empty-state">
                      <p>Voc√™ n√£o tem solicita√ß√µes de conex√£o pendentes.</p>
                  </div>
                  {% endfor %}
              </div>
          </div>

          <!-- Seguidores -->
          <div class="tab-pane" id="seguidores">
              <div class="search-bar">
                  <input type="text" placeholder="Buscar seguidores..." class="search-input">
                  <button class="search-btn">üîç</button>
              </div>

              <div class="followers-grid">
                  {% for follower in followers %}
                  <div class="follower-card">
                      <div class="follower-avatar">
                          {% if follower.avatar %}
                          <img src="{{ follower.avatar.url }}" alt="{{ follower.username }}">
                          {% else %}
                          <div class="avatar-placeholder">
                              <span>{{ follower.username|make_list|first|upper }}</span>
                          </div>
                          {% endif %}
                      </div>
                      <div class="follower-info">
                          <h4>{{ follower.get_full_name }}</h4>
                          <p>@{{ follower.username }}</p>
                      </div>
                      <div class="follower-actions">
                          {% if follower.is_connection %}
                          <span class="connection-badge">Conectado</span>
                          {% else %}
                          <button class="btn-connect" data-id="{{ follower.id }}">Conectar</button>
                          {% endif %}
                      </div>
                  </div>
                  {% empty %}
                  <div class="empty-state">
                      <p>Voc√™ ainda n√£o tem seguidores.</p>
                  </div>
                  {% endfor %}
              </div>
          </div>

          <!-- Seguindo -->
          <div class="tab-pane" id="seguindo">
              <div class="search-bar">
                  <input type="text" placeholder="Buscar pessoas que voc√™ segue..." class="search-input">
                  <button class="search-btn">üîç</button>
              </div>

              <div class="following-grid">
                  {% for following in followings %}
                  <div class="following-card">
                      <div class="following-avatar">
                          {% if following.avatar %}
                          <img src="{{ following.avatar.url }}" alt="{{ following.username }}">
                          {% else %}
                          <div class="avatar-placeholder">
                              <span>{{ following.username|make_list|first|upper }}</span>
                          </div>
                          {% endif %}
                      </div>
                      <div class="following-info">
                          <h4>{{ following.get_full_name }}</h4>
                          <p>@{{ following.username }}</p>
                      </div>
                      <div class="following-actions">
                          <button class="btn-unfollow" data-id="{{ following.id }}">Deixar de Seguir</button>
                      </div>
                  </div>
                  {% empty %}
                  <div class="empty-state">
                      <p>Voc√™ ainda n√£o est√° seguindo ningu√©m.</p>
                      <button class="btn-secondary">Encontrar Pessoas</button>
                  </div>
                  {% endfor %}
              </div>
          </div>
      </div>
  </div>
</section>
{% endblock %}
