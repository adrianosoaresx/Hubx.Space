{% extends 'perfil/perfil_subpage_base.html' %}
{% block title %}Editar Evento | Hubx{% endblock %}

{% block perfil_subpage_content %}
<section class="perfil-section active">
    <div class="empresa-form-container">
        <h1 class="form-title">Editar Evento</h1>
        <form method="post">
            {% csrf_token %}
            {% for field in form %}
            {% if field.name != 'inscritos' %}
            {{ field.as_p }}
            {% endif %}
            {% endfor %}
            <div class="form-actions" style="justify-content:flex-end;">
                <a href="{% url 'eventos:list' %}" class="btn-secondary">Cancelar</a>
                <button type="submit" class="btn-primary">Salvar</button>
            </div>
        </form>
        <hr>
        <h2>Inscritos</h2>
        <div class="empresas-grid">
            {% for inscrito in object.inscritos.all %}
            <div class="empresa-card">
                <div class="empresa-info">
                    <h3>{{ inscrito.get_full_name|default:inscrito.username }}</h3>
                    <p class="empresa-tipo">{{ inscrito.email }}</p>
                </div>
                {% if user.tipo_id == 4 or user.tipo_id == 1 or user.tipo_id == 2 %}
                <div class="empresa-actions">
                    <form method="post" action="{% url 'eventos:remove_inscrito' object.pk inscrito.pk %}">
                        {% csrf_token %}
                        <button type="submit" class="btn-danger">Remover</button>
                    </form>
                </div>
                {% endif %}
            </div>
            {% empty %}
            <div class="empty-state">Nenhum inscrito.</div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
