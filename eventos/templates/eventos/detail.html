{% extends 'perfil/perfil_subpage_base.html' %}
{% block title %}{{ object.titulo }} | Hubx{% endblock %}

{% block perfil_subpage_content %}
<section class="perfil-section active">
    <div class="empresa-form-container">
        <h1 class="form-title">{{ object.titulo }}</h1>
        <p>{{ object.descricao }}</p>
        <p><strong>Quando:</strong> {{ object.data_hora }}</p>
        <p><strong>Duração:</strong> {{ object.duracao }}</p>
        {% if user.is_authenticated %}
        <form action="{% url 'eventos:subscribe' object.pk %}" method="post">
            {% csrf_token %}
            {% if user in object.inscritos.all %}
            <button type="submit" class="btn-secondary">Cancelar inscrição</button>
            {% else %}
            <button type="submit" class="btn-primary">Inscrever-se</button>
            {% endif %}
        </form>
        {% endif %}
        <h2 style="margin-top:2rem;">Inscritos</h2>
        <div class="empresas-grid">
            {% for inscrito in object.inscritos.all %}
            <div class="empresa-card">
                <div class="empresa-info">
                    <h3>{{ inscrito.get_full_name|default:inscrito.username }}</h3>
                    <p class="empresa-tipo">{{ inscrito.email }}</p>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">Nenhum inscrito.</div>
            {% endfor %}
        </div>
        <div class="form-actions" style="justify-content:flex-end; margin-top:1rem;">
            <a href="{% url 'eventos:list' %}" class="btn-secondary">Voltar</a>
        </div>
    </div>
</section>
{% endblock %}
