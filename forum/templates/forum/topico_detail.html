{% extends 'perfil/perfil_subpage_base.html' %}
{% load static %}

{% block title %}{{ object.titulo }} | Matrix Forum{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/forum.css' %}">
{% endblock %}

{% block perfil_subpage_content %}
<section class="matrix-detail-section">
    <div class="matrix-topic-header">
        <h2 class="matrix-topic-title">{{ object.titulo }}</h2>
        <p class="matrix-topic-meta">por <strong>{{ object.autor.username }}</strong> em {{ object.criado_em|date:'SHORT_DATETIME_FORMAT' }}</p>
    </div>
    
    <div class="matrix-content">
        {{ object.conteudo|linebreaks }}
    </div>

    <h3 class="matrix-responses-title">// Respostas</h3>
    <ul class="matrix-responses-list">
        {% for resposta in object.respostas.all %}
        <li class="matrix-response-item">
            <div class="matrix-response-content">{{ resposta.conteudo|linebreaks }}</div>
            <div class="matrix-response-meta">
                <strong>{{ resposta.autor.username }}</strong> - {{ resposta.criado_em|date:'SHORT_DATETIME_FORMAT' }}
            </div>
        </li>
        {% empty %}
        <li class="matrix-no-responses">// Nenhuma resposta encontrada</li>
        {% endfor %}
    </ul>

    <div class="matrix-reply-form">
        <h3 class="matrix-reply-title">// Responder</h3>
        <form method="post" action="{% url 'forum:responder' object.pk %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="matrix-reply-btn">Transmitir</button>
        </form>
    </div>
</section>
{% endblock %}
