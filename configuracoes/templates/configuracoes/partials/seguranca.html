{% load widget_tweaks i18n %}

<form
  method="post"
  hx-post="{% url 'configuracoes' %}?tab=seguranca"
  hx-target="#content"
  class="space-y-4"
>
  {% csrf_token %}
  <input type="hidden" name="tab" value="seguranca" />
  <fieldset class="space-y-4">
    <legend class="sr-only">{% trans 'Segurança da conta' %}</legend>
    {% for field in seguranca_form %}
      <div>
        <label for="{{ field.id_for_label }}" class="block text-sm font-medium"
          >{{ field.label }}</label
        >
        {{ field|add_class:'w-full p-2 border rounded-lg'|attr:'tabindex:0' }}
        {% for error in field.errors %}
          <p role="alert" class="text-red-600 text-sm">{{ error }}</p>
        {% endfor %}
      </div>
    {% endfor %}
  </fieldset>
  <div class="text-right pt-2">
    <button
      type="submit"
      aria-label="{% trans 'Salvar Alterações' %}"
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      {% trans 'Salvar Alterações' %}
    </button>
  </div>
</form>

<div class="mt-6 border-t pt-4">
  <h2 class="text-lg font-semibold mb-2">
    {% trans 'Autenticação em duas etapas' %}
  </h2>
  {% if two_factor_enabled %}
    <p class="text-sm mb-4">
      {% trans '2FA está habilitado para sua conta.' %}
    </p>
    <a
      href="{% url 'tokens:desativar_2fa' %}"
      class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
    >
      {% trans 'Desativar 2FA' %}
    </a>
  {% else %}
    <p class="text-sm mb-4">
      {% trans '2FA não está habilitado.' %}
    </p>
    <a
      href="{% url 'tokens:ativar_2fa' %}"
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      {% trans 'Ativar 2FA' %}
    </a>
  {% endif %}
</div>
